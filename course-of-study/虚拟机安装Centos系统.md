# 							虚拟机安装Centost系统

### 第一步、安装虚拟机软件

这里用的是`VMware`，直接去百度或者谷歌搜索下载安装即可，安装的时候需要用激活码来激活。



### 第二步、下载Centos镜像文件

下载地址：[Download (centos.org)](https://www.centos.org/download/)

选择对应的版本下载，这里用的是：`CentOS-7-x86_64-DVD-2009.iso`



### 第三步、安装系统

安装前先要配置硬盘，内存，CPU，网络等硬件信息，再选择系统镜像文件进行安装。安装过程要求输入用户名，密码，选择时区，键盘等信息。跟着安装步骤一步步走就行。

我这里配置了信息如下：硬盘20G，内存1G，CPU 1核心，网络选择NAT模式。这些配置，在系统成功安装后，也是可以重新设置的。

重点是网络的选择，一般使用NAT模式或者桥接模式。我这里使用了自定义的NAT模式。

![自定义NAT](https://picgo-5n8.pages.dev/img/vmnet8.png)

NAT使用的是本地的VMnet8网卡。

打开虚拟机菜单栏中的编辑，选择虚拟网络编辑器，查看网卡的一些信息

![NAT设置](https://picgo-5n8.pages.dev/img/NAT设置.png)

子网IP，子网掩码和网关要记住，等一下配置网卡的静态IP需要用到。

也可以在`cmd`命令行中查看`VMnet8`网卡的`IP`

![NAT设置](https://picgo-5n8.pages.dev/img/cmd.png)

到这一步，我们知道的网卡信息如下：

本地的VMnet8 IP是:`192.168.119.1`

NAT的子网掩码是：`255.255.255.0`

NAT的网关是：`192.168.119.2`



### 第四步、配置网卡地址为静态IP

默认的是`DHCP`动态分配，那么为什么要设置静态IP呢？这是为了方便我们用SSH工具去连接，如果不设置静态IP，那么网卡的IP就可能发生变化，SSH的设置就得重新配置，比较麻烦。

我们先用命令查看网卡名称：`ip a`

一般有两个名称，一个是`lo`,本地回环地址；另一个才是我们要修改的网卡，我这里的名称是：`ens33`。名称有可能会不一样，这都没关系，操作是一样的。

打开`ens33`的网卡配置：

`vi /etc/sysconfig/network-scripts/ifcfg-ens33`

修改如下：

![NAT设置](https://picgo-5n8.pages.dev/img/ens33配置.png)

把`BOOTPROTO从dhcp，改为static`

把`ONBOOT=no，改为yes`

添加配置信息如上图

`GATEWAY,NETMASK,`配置为与刚才记录的一样，`DNS1`配置为网关的地址。

`IPADDR`在子网范围内随便选一个即可，注意不要与网关和本地的`VMnet8`相同。

配置好之后，保存退出，然后重启网卡服务：`systemctl restart network`

重启完之后再用：`ip a `命令就可查看到刚才的配置信息。



### 第五步、使用SSH工具连接Centos

这一步比较简单，输入`IP`地址，用户名和密码等即可。这一步可能会发生错误，连接不上。

可能原因是系统没有安装ssh服务，解决方法如下：

安装：`yum install openssh-server`

安装完成，启动服务，并设置开机启动

启动：`systemctl start sshd`

设置开机启动：`systemctl enable sshd`

ssh默认端口为22，一般不需要修改，如需修改配置，可打开配置文件来修改。

配置文件路径：`/etc/ssh/sshd_config`

修改后重新加载：`systemctl reload sshd`



#### 补充：NAT模式，桥接模式和主机模式，这三者之间的区别。

首先是桥接模式，这个模式下，本地与虚拟机共用一张网卡，他们之间是平等关系。局域网内的设备也可以访问该虚拟机。

NAT模式是：主机与虚拟机之间多了一层地址转换，虚拟机网卡与本地网卡IP不在同一网段，从虚拟机访问网络时，IP会转为主机IP来访问。类似于我们平时使用多台设备连接wifi，我们访问外部网络时，我们多台设备的IP地址也会转为同一个公网IP去访问。

主机模式就是：虚拟机只能跟主机通信，虚拟机访问不了外部网络。

设置这三种模式是为了不同的网络访问权限。